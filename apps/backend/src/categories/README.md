# Categories Module

Модуль управления категориями рынков.

## Возможности

- ✅ Иерархическая структура категорий
- ✅ CRUD операции
- ✅ Публичный доступ к чтению
- ✅ Админский доступ к созданию/изменению

## Структура

Категории поддерживают иерархию:
- Родительские категории (parent = null)
- Дочерние категории (parent = category_id)

## API Endpoints

### Публичные (не требуют аутентификации)

- `GET /categories` - Список категорий
- `GET /categories/:id` - Получение категории по ID
- `GET /categories/slug/:slug` - Получение категории по slug

### Админские (требуют роль admin)

- `POST /categories` - Создание категории
- `PATCH /categories/:id` - Обновление категории
- `DELETE /categories/:id` - Удаление категории

## Примеры использования

### Создание категории

```typescript
POST /categories
Authorization: Bearer <admin_token>

{
  "name": "Криптовалюты",
  "slug": "cryptocurrency",
  "description": "Рынки на криптовалюты",
  "iconUrl": "https://example.com/crypto-icon.png",
  "sortOrder": 1,
  "isActive": true
}
```

### Создание дочерней категории

```typescript
POST /categories
Authorization: Bearer <admin_token>

{
  "name": "Биткоин",
  "slug": "bitcoin",
  "description": "Рынки на биткоин",
  "parentId": "parent-category-uuid",
  "sortOrder": 1
}
```

### Получение категорий с фильтрацией

```typescript
GET /categories?includeInactive=false&includeChildren=true
```

## Валидация

- Slug должен быть уникальным
- Родительская категория должна существовать
- Категория не может быть родителем самой себя
- Категория не может быть родителем своего потомка
- Нельзя удалить категорию с дочерними категориями
- Нельзя удалить категорию с привязанными рынками

## Бизнес-логика

1. При создании проверяется уникальность slug
2. При обновлении проверяется отсутствие циклических ссылок
3. При удалении проверяется отсутствие дочерних категорий и рынков
4. По умолчанию показываются только активные категории

