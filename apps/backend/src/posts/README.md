# Posts Module

–ú–æ–¥—É–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å—Ç–∞–º–∏ –≤ Telegram –∫–∞–Ω–∞–ª–∞—Ö —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —à–∞–±–ª–æ–Ω–æ–≤, deep links –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–º–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ –ø–æ—Å—Ç–æ–≤
- ‚úÖ Deep links –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ä—ã–Ω–∫–∞–º
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞
- ‚úÖ –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram –∫–∞–Ω–∞–ª—ã
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∏ –∫–ª–∏–∫–æ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
posts/
‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îú‚îÄ‚îÄ create-post.dto.ts
‚îÇ   ‚îî‚îÄ‚îÄ update-post.dto.ts
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ deeplink.service.ts        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è deep links
‚îÇ   ‚îú‚îÄ‚îÄ traffic-tracking.service.ts # –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ telegram-posting.service.ts # –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Telegram
‚îú‚îÄ‚îÄ posts.service.ts
‚îú‚îÄ‚îÄ posts.controller.ts
‚îî‚îÄ‚îÄ posts.module.ts
```

## API Endpoints

### POST /posts
–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)

**Request:**
```json
{
  "channelId": "channel-uuid",
  "templateId": "template-uuid",
  "marketId": "market-uuid",
  "title": "–ù–æ–≤—ã–π —Ä—ã–Ω–æ–∫!",
  "content": "–û–ø–∏—Å–∞–Ω–∏–µ —Ä—ã–Ω–∫–∞...",
  "status": "draft",
  "templateVariables": {
    "marketTitle": "–ë—É–¥–µ—Ç –ª–∏ Bitcoin –≤—ã—à–µ $50k?",
    "endDate": "2024-12-31"
  }
}
```

### GET /posts
–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ—Å—Ç–æ–≤ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)

**Query:**
- `channelId` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞–Ω–∞–ª—É
- `status` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
- `marketId` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ä—ã–Ω–∫—É
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `limit` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

### POST /posts/:id/publish
–ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–∞ –≤ –∫–∞–Ω–∞–ª (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)

### POST /posts/track/click
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∏–∫–∞ –ø–æ —Å—Å—ã–ª–∫–µ (–ø—É–±–ª–∏—á–Ω—ã–π)

**Request:**
```json
{
  "trafficSourceId": "source-uuid",
  "userId": "user-uuid"
}
```

### POST /posts/:id/track/view
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ—Å—Ç–∞ (–ø—É–±–ª–∏—á–Ω—ã–π)

### GET /posts/:id/stats
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ—Å—Ç–∞ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)

## Deep Links

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è deep links –∫ Mini App:

- –ö —Ä—ã–Ω–∫—É: `https://your-mini-app.com/markets/:id?source=post_123`
- –ö —Å–ø–∏—Å–∫—É —Ä—ã–Ω–∫–æ–≤: `https://your-mini-app.com/markets?source=post_123`
- –ö –∫–æ—à–µ–ª—å–∫—É: `https://your-mini-app.com/wallet?source=post_123`

## –®–∞–±–ª–æ–Ω—ã –ø–æ—Å—Ç–æ–≤

–®–∞–±–ª–æ–Ω—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `{{variableName}}`:

**–ü—Ä–∏–º–µ—Ä —à–∞–±–ª–æ–Ω–∞:**
```
üéØ –ù–æ–≤—ã–π —Ä—ã–Ω–æ–∫: {{marketTitle}}

{{description}}

üí∞ –û–±—ä–µ–º: {{volume}} TON
üìÖ –ó–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è: {{endDate}}

üì± –û—Ç–∫—Ä–æ–π—Ç–µ Mini App, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É!
```

## –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞

–ö–∞–∂–¥—ã–π –ø–æ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ —Ç—Ä–∞—Ñ–∏–∫–∞ (`TrafficSource`), –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–≤—è–∑—å —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram

–ü–æ—Å—Ç—ã –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ Telegram –∫–∞–Ω–∞–ª—ã —á–µ—Ä–µ–∑ Telegram Bot API:
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTML —Ä–∞–∑–º–µ—Ç–∫–∏
- Inline –∫–Ω–æ–ø–∫–∏ –¥–ª—è Mini App
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ —Å —à–∞–±–ª–æ–Ω–æ–º

```typescript
POST /posts
{
  "channelId": "channel-uuid",
  "templateId": "template-uuid",
  "marketId": "market-uuid",
  "templateVariables": {
    "marketTitle": "–ë—É–¥–µ—Ç –ª–∏ Bitcoin –≤—ã—à–µ $50k?",
    "description": "–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –∫–æ–Ω–µ—Ü –≥–æ–¥–∞",
    "volume": "1000",
    "endDate": "31 –¥–µ–∫–∞–±—Ä—è 2024"
  }
}
```

### –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–∞

```typescript
POST /posts/:id/publish
```

–ü–æ—Å—Ç –±—É–¥–µ—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –∫–∞–Ω–∞–ª–µ —Å –∫–Ω–æ–ø–∫–æ–π –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è Mini App.

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–ª–∏–∫–æ–≤

```typescript
POST /posts/track/click
{
  "trafficSourceId": "source-uuid",
  "userId": "user-uuid"
}
```

