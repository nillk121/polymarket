# üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

## –ü—Ä–æ–±–ª–µ–º–∞: 502 Bad Gateway –≤ Telegram –±–æ—Ç–µ

### –°–∏–º–ø—Ç–æ–º—ã
- –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä—ã–Ω–∫–æ–≤"
- –ö–æ–º–∞–Ω–¥—ã `/markets`, `/balance`, `/deposit` –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ: `502 Bad Gateway` –∏–ª–∏ `Unable to reach the origin service`

### –ü—Ä–∏—á–∏–Ω—ã
1. **–ë—ç–∫–µ–Ω–¥ –Ω–µ –∑–∞–ø—É—â–µ–Ω** - —Å–µ—Ä–≤–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 3002
2. **Cloudflare Tunnel –Ω–µ –º–æ–∂–µ—Ç –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ –±—ç–∫–µ–Ω–¥–∞** - —Ç—É–Ω–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API_URL** - –±–æ—Ç –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –∞–¥—Ä–µ—Å—É

### –†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å localhost (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

1. –û—Ç–∫—Ä–æ–π—Ç–µ `apps/telegram-bot/.env`
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
   ```env
   API_URL=http://localhost:3002/api
   ```
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω:
   ```bash
   cd apps/backend
   npm run dev
   ```
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
   ```bash
   cd apps/telegram-bot
   npm run dev
   ```

### –†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å Cloudflare Tunnel

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3002:
   ```bash
   # –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
   cd apps/backend
   npm run dev
   ```
   
   –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
   ```
   üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3002
   üìö API –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:3002/api
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Cloudflare Tunnel –∑–∞–ø—É—â–µ–Ω –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç:
   ```bash
   # –¢—É–Ω–Ω–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ localhost:3002
   cloudflared tunnel --url http://localhost:3002
   ```

3. –û–±–Ω–æ–≤–∏—Ç–µ `apps/telegram-bot/.env` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º URL —Ç—É–Ω–Ω–µ–ª—è:
   ```env
   API_URL=https://–≤–∞—à-—Ç—É–Ω–Ω–µ–ª—å.trycloudflare.com/api
   ```

### –†–µ—à–µ–Ω–∏–µ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 3002 —Å–≤–æ–±–æ–¥–µ–Ω:
   ```powershell
   # Windows PowerShell
   Get-NetTCPConnection -LocalPort 3002 -ErrorAction SilentlyContinue
   ```

2. –ï—Å–ª–∏ –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç, –ª–∏–±–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç–µ –µ–≥–æ, –ª–∏–±–æ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `apps/backend/.env`:
   ```env
   PORT=3002
   ```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –±–æ—Ç–∞
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/markets`
4. –ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã —É–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ —Ä—ã–Ω–∫–æ–≤

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞:
```bash
cd apps/telegram-bot
npm run dev
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
üîó Telegram Bot API URL: http://localhost:3002/api
   (–∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è API_URL)
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ Cloudflare URL –∏ –æ—à–∏–±–∫–∏ 502, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –†–µ—à–µ–Ω–∏–µ 1.

## –î—Ä—É–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_BOT_TOKEN` –≤ `apps/telegram-bot/.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ `apps/backend/.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å –∏ –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### Redis –æ—à–∏–±–∫–∏
- Redis –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω - –±—ç–∫–µ–Ω–¥ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –Ω–µ–≥–æ (—Å in-memory –∫—ç—à–µ–º)
- –ï—Å–ª–∏ –Ω—É–∂–µ–Ω Redis, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ:
  ```bash
  docker run -d -p 6379:6379 redis:alpine
  ```
